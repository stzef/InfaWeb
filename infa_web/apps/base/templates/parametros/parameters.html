{%extends 'layouts/base.html'%}

{%block content%}
	{%include 'elements/nav.html'%}
	{%include 'elements/sidebar.html'%}
	<div class="content-wrapper" style="min-height: 921px;">
	<section class="content">
		<div class="container">
			<h2>Parametros</h2>
			<ul class="nav nav-pills">
				{% for k, module in modules.iteritems %}
				{% if forloop.first %}  
					<li class="active"><a data-toggle="pill" href="#{{module.module.nmodule}}">{{module.module.nmodule}}</a></li>
				{% else %}
					<li><a data-toggle="pill" href="#{{module.module.nmodule}}">{{module.module.nmodule}}</a></li>
				{% endif %}
				{% endfor %}
			</ul>

			<div class="tab-content">
				{% for k, module in modules.iteritems %}
					{% if forloop.first %}  
						<div id="{{module.module.nmodule}}" class="tab-pane fade in active">
					{% else %}
						<div id="{{module.module.nmodule}}" class="tab-pane fade in ">
					{% endif %}
						<div class="row">
							<div class="col-md-12">
								<div class="box box-primary">
									<div class="box-header with-border">
										<h3 class="box-title">{{module.module.nmodule}}</h3>
									</div>
									<div class="box-body">
										<form action="" method="POST" role="form" class="form-horizontal" enctype="multipart/form-data" target="_blank">
											{% for parameter in parameters %}
												{% if module.module.smodule == parameter.smodule %}
													<div class="form-group parameter">
														<label for="{{parameter.field.id}}" class="{{parameter.css.label}}">{{parameter.label.text}}</label>
														<div class="{{parameter.css.field_container}}">
															{% if parameter.field.input %}
																{% if parameter.field.type != "checkbox" %}
																	<input class="{{parameter.css.field}}" id="{{parameter.field.id}}" type="{{parameter.field.type}}">
																{% else %}
																	<input class="{{parameter.css.field}}" {% if parameter.value %}checked{% endif %} id="{{parameter.field.id}}" type="{{parameter.field.type}}">
																{% endif %}
															{% else %}
																<select class="{{parameter.css.field}}" name="" id="{{parameter.field.id}}">
																	{% for option in parameter.field.options %}
																		<option value="{{option.value}}" {% if option.value == parameter.value %}selected{% endif %}>{{option.text}}</option>
																	{% endfor %}
																</select>
															{% endif %}
														</div>
													</div>
												{% endif %}
											{% endfor %}
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
				
			</div>
		</div>
	</section>
	</div>
	{%include 'elements/footer.html'%}
{%endblock%}
{% block content_script %}
	<script>
	var parameters = [];
	$(".parameter").toArray().forEach( function(element, index) {
		
		dataParameter = {
			type:$("[data-type]",$(element)).data("type"),
			value:$("[data-value]",$(element)).val(),
		};
		parameters.push(dataParameter)
	});
	console.log(parameters)

	</script>
{%endblock%}
